# T2-only with first pulse features - Diagnostic Experiment
# Experiment: t2_first_pulse
#
# PURPOSE: Test if T2 can train independently by skipping T1 DOM aggregation.
# Instead of using T1 to aggregate pulses, we use first pulse features from
# each DOM directly as input to T2.
#
# This helps diagnose whether training issues are in T1 or T2.

model:
  # Model architecture (T2 only, no T1)
  model_type: t2_first_pulse  # Use T2FirstPulseModel
  d_model: 128
  n_heads: 4
  n_layers: 4
  max_doms: 2048
  dropout: 0.0  # Start with 0

training:
  # Data
  max_events: 100000  # Start with 100K for quick iteration
  batch_size: 256
  val_split: 0.1
  num_workers: 0

  # Optimization
  num_epochs: 20
  learning_rate: 0.0003  # 3e-4
  weight_decay: 0.00001  # 1e-5
  grad_clip_norm: 1.0
  accumulation_steps: 1

  # Checkpointing
  checkpoint_dir: experiments/baseline_1m/checkpoints_t2_first_pulse
  save_every_n_epochs: 1

  # Logging
  log_dir: logs/t2_first_pulse
  log_every_n_steps: 50
  validate_every_n_epochs: 1

  # W&B
  use_wandb: true
  wandb_project: iceaggr
  wandb_run_name: t2-first-pulse-diagnostic
  wandb_tags:
    - diagnostic
    - t2-only
    - first-pulse
    - 100k-events
